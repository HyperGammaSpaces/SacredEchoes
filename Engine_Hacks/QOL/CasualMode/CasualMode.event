// option byte 0x42&40 enables Casual Mode (fallen units come back next chapter).
// hack by circleseverywhere and 7743, menu by hypergammaspaces
// optimizations and improvements by 7743

#define OptID_CasualMode OptID_Unused2
//A2EBD8
GameOptionsEntry(OptID_CasualMode, Text_Options_CasualMode, Text_Options_CasualMode_Off_Desc, Text_Options_CasualMode_Off, 112, Text_Options_CasualMode_On_Desc, Text_Options_CasualMode_On, 165, 0x12)

  PUSH
	//Actually unkill the unit
    ORG $18418
      jumpToHack(CasualMode_Main)
	  
	//Display retreat quote for allies rather than death quote
	ORG $83620
	  jumpToHack(CallRetreatQuote)
    ORG $846FE
	  SHORT $2101
	//Setup new save to recognize casual mode
	ORG $30DAC
	  jumpToHack(CasualMode_SetFlag)
    
    //Setup options menu
        
    //Option 0xD getter
    ORG $B1E38
    POIN $B1F50
    
    //Option 0xD setter
    ORG $B1FB8
    POIN $B2168

  POP
  
//Include ASMC for Check CasualMode from events
ALIGN 4
#define CasualCheckASMC "SHORT $0D40 $0; POIN CasualCheck_ASMC+1"

//ASM functions
#include "asm/CasualModeMenu.lyn.event"
ALIGN 4

ALIGN 4
#include "ShowDifficulty.event"
