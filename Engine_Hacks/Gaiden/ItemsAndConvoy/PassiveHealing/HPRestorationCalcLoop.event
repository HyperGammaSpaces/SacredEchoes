
#ifndef HP_RESTORATION_CALC_LOOP_INSTALLED
#define HP_RESTORATION_CALC_LOOP_INSTALLED

PUSH
	ORG $1A258
	jumpToHack(HPRestorationLoopFunc)
	
	//fix for popups re-triggering on map anims
	ORG $35E6C
	jumpToHack(ClearTargetUnitBeforeMapHeal)
POP

#include "HPRestorationCalcLoop.lyn.event"

//TODO: soothing light (restore hp when near a bishop)
//TODO: swamp/lava damage
//TODO: convert to fixed number rather than percent?

ALIGN 4
HPRestorationLoop: //for each, r0 = unit and r1 = current heal %; return modified heal % in r0
POIN HealingWeapons
POIN HealingItems
//POIN SoothingLight 
WORD 0 //terminator


#endif // HP_RESTORATION_CALC_LOOP_INSTALLED
