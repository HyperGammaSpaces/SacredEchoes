//Essential Fixes for FE8
//Install with Event Assembler
#define EssentialFixes true
PUSH

//Fix Stone's map animation crashing no$ due to a bad decompression
ORG $7E2B4
BYTE 0x8

//Add a check for r0=0 in the decompression routine so that no$gba doesn't crash when trying to decompress something it shouldn't (thanks Teq)
//ORG 0x12F52
//BYTE 0x00 0x28 0x14 0xD0 0xFA 0x22 0x12 0x06 0x52 0x18 0x0A 0x4B 0x01 0x25 0x9A 0x42 0x00 0xD8 0x00 0x25 0x09 0x4A 0x03 0x78 0xF0 0x24 0x23 0x40 0xDB 0x08 0x5B 0x19 0x9B 0x00 0xD2 0x18 0x12 0x68 0xC0 0x46 0xC0 0x46

//Make the Add trap data routine have a check to prevent writing past the limit
ORG $2E2B8
SHORT 0xB470 0x4C07 0x4D07 0x3408 0x42AC 0xD806 0x78A6 0x2E00 0xD1F9 0x7020 0x7061 0x70A2 0x70E3 0x1C20 0xBC70 0x4770 0xA60C 0x0203 0xA814 0x0203
  
//Allows MNC2 To jump to any chapter ID.
//  ORG 0xBD070
//  SHORT 0xE0B8
  
  //Fixes the world map chapter ID being loaded instead of the actual chapter ID.
  ORG 0x897B2
  SHORT 0 0
  //Fixes the game considering some chapters postgame.
  ORG 0x897C4
  SHORT 0x200E 0x5620 //mov r0, #0x0E; ldsb r0, [r4, r0]
  ORG 0x206948
  BYTE 0

//Set Default Options
  ORG $30d8a  //animations type 2
  SHORT $3306
  ORG $30da6  //Game/text speed Fast, Autocursor off
  SHORT $22d0
  
//Allow Visit from any tile except Ruins
  ORG $23070
  SHORT $2826 $D021 $e00c
  
//Make overworld healing faster (first byte 0x08 for 2x, 0x10 for 4x, 0x20 for 8x)
  ORG $7BCE2
  BYTE 0x10 0x34 0x24 0x04 0x24 0x0c 0x00 0x00 0x00 0x00 0x8c 0x42 0x09 0xda
  
//Put weather behind UI
	ORG $30366 //change 80 to 80/A0/C0/E0 light snow
	BYTE $C0
	ORG $3066D //change 10 to 10/14/18/1C heavy snow
	BYTE $18
	ORG $59D95F 
	BYTE $18
	ORG $59D967 //change 10 to 10/14/18/1C rain
	BYTE $18
	ORG $309B2 //change A0 to A0/A4/A8/AC BBQ
	BYTE $A8
	ORG $3053C //change 10 to 10/14/18/1C sandstorm
	BYTE $18
	ORG $304DC
	BYTE $00 //fix sandstorm graphics
	ORG $30B31 //change AC to A0/A4/A8/AC clouds
	BYTE $A8

//Break HP Cap for Players/NPCs (credit Solum)
  // ORG $181ee
  // SHORT $1c11
  // ORG $2bf4c
  // BYTE $7f
  
//Set HP Cap for Players/NPCs
  //ORG $181E2
  //ORG $181EE
  //ORG $2BF4C
  //ORG $2BF64
  //ORG $9C0E4
  //ORG $9C278
  // BYTE $34 //52 in dec

//skip hand axe wait for return
  //ORG $514e
  //SHORT 0
  //ORG $58c90
  //POIN $596cc
  
//Fix Uncounterable weapon anims
  ORG $57279
  BYTE $E0

//allow Wyvern Knights to triangle attack
  ORG $2b168
  SHORT 0

//12 Tracks/16 Sounds Fix (credit Agro/Brendor)
  ORG $2900
  SHORT $e00c
  ORG $2924
  SHORT $280c $d00e $200c
  ORG $22440c
  BYTE $10
  ORG $224414
  SHORT $67b0 $0300 $0010

//Fix Weak Promoted Enemies (credit Gryz)
  ORG $180b4
  SHORT $2a00 $dc00 $2201

//Hold A to speed up movement (credit Gryz)
  ORG $794ee
  SHORT 0

//Skip H&S screen
  ORG $CC20C
  SHORT 0

//Skip Intro cutscene
  ORG $C6714
  SHORT 0

//Skip New Game text
//  ORG $C4928
//  SHORT 0

//Silence New Game music
//  ORG $C4A0C
//  BYTE 0

//Autocursor Fix (credit Vennobennu)
  ORG $3325a
  SHORT $e021

//Pierce Glitch Fix (credit Brendor)
  ORG $2b290
  BYTE $a0
  // ORG $2b482
  // BYTE $a0

//Unlock Sound Room songs
  ORG $aede0
  BYTE $FF
  
//CG Fade glitch
  ORG $EBCA
  BYTE 8
  ORG $EDE0
  SHORT $1c0a

//Enemy Control Glitch Fix (Credits to Brendor)
  ORG 0x377A0
  SHORT 0xE007

//Mode Coefficient EXP fix (credit Vennobennu)
  ORG 0x2C474
  WORD 0

//Skip Intro and Class Roll (otherwise pre-battle anims will crash this)
  ORG $c63ad
  BYTE $e0
  
// Fix proc names not being cleared (Stan)
ORG $002C9E
  SHORT $6129 $2026 $5429 $3002 $5429

// Fix CAM1/CAMERA2 going out of bounds (Stan)
ORG $015D52
  BYTE 14
ORG $015D66
  BYTE 9
  
//Prevent Freeze for Camera
ORG $F25C
BYTE 0x00 0x20

//Prevent Freeze for Cursor
ORG $10804
BYTE 0x00 0x20

//Prevent Freeze For Unit State Event 0x34.
//(REMU,REVEAL,CUSA,CUSN,CUSE,SET_HP,SET_ENDTURN,SET_STATE,SET_SOMETHING,DISA_IF,REMU,DISA)
ORG 0x102D4
BYTE 0x00 0x20

//Prevent Freeze For Unit State Event 0x33.
//(CHECK_STATUS,CHECK_COORDS,CHECK_CLASS,CHECK_LUCK,CHECK_COORDS,CHECK_CLASS,CHECK_DEPLOYED,CHECK_ACTIVEID,CHECK_ALLEGIANCE,CHECK_EXISTS)
ORG 0x1027C
BYTE 0x00 0x20 0x02 0xE0

#include "Extensions/Hack Installation.txt"

//Animation Hacks by Hextator
{
//C01 hack
ORG $46446c
WORD 0x80522cd
ORG $5138
WORD $47004800 $8464421
ORG $464420
WORD 0x401820FF 0xD00A2801 0xD8062818 0x6A10D103 0x62103804 0x4B0BE013 0x4B0B4718 0x041B4718 0x009B0E1B 0x3101A102 0x4908468E 0x46C04708 0xD1002801 0x33042300 0x1AC06A10 0x1C206210 0x46C0BD30 0x08005145 0x08005159 0x080522CD

//C48 hack
ORG $58d64
WORD $8464400
ORG $464400
WORD 0x3D046A3D 0x022D682D 0xA5020C28 0x46AE3501 0x47284D01 0x47004801 0x08071991 0x080596CD
}

POP
